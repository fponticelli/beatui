/* ProgressBar Component - Progress indicator with determinate and indeterminate states */

.bc-progress-bar-wrapper {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  width: 100%;
}

.bc-progress-bar {
  --progress-fill: var(--color-primary-500);
  --progress-fill-dark: var(--color-primary-600);
  --progress-track: oklch(0.9 0 0);
  --progress-track-dark: oklch(0.3 0 0);

  position: relative;
  width: 100%;
  overflow: hidden;
  border-radius: var(--radius-control, var(--radius-full));
}

.bc-progress-bar__track {
  width: 100%;
  height: 100%;
  background-color: var(--progress-track);
  position: relative;
  overflow: hidden;
  border-radius: inherit;
}

.bc-progress-bar__fill {
  height: 100%;
  background-color: var(--progress-fill);
  border-radius: inherit;
  transition: width var(--motion-transition-medium)
    var(--motion-easing-standard);
  will-change: width;
}

/* Size variants */
.bc-progress-bar--size-sm {
  height: var(--spacing-base);
}

.bc-progress-bar--size-md {
  height: var(--spacing-md);
}

.bc-progress-bar--size-lg {
  height: var(--spacing-mdh);
}

/* Indeterminate state - animated sliding bar */
.bc-progress-bar--indeterminate .bc-progress-bar__fill {
  width: 40%;
  position: absolute;
  animation: bc-progress-indeterminate 1.5s cubic-bezier(0.4, 0, 0.6, 1)
    infinite;
}

@keyframes bc-progress-indeterminate {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(150%);
  }
  100% {
    transform: translateX(-100%);
  }
}

/* Label text */
.bc-progress-bar__label {
  font-family: var(
    --font-family-default-ui,
    var(--font-ui, var(--font-body, var(--font-family-sans)))
  );
  font-size: var(--font-size-sm);
  color: var(--text-muted);
  text-align: right;
  line-height: var(--line-height-none);
}

/* Dark mode styles */
.dark .bc-progress-bar__track {
  background-color: var(--progress-track-dark);
}

.dark .bc-progress-bar__fill {
  background-color: var(--progress-fill-dark);
}

/* Accessibility: respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .bc-progress-bar__fill {
    transition: none;
  }

  .bc-progress-bar--indeterminate .bc-progress-bar__fill {
    animation: none;
    /* Show static partial fill instead of animation */
    width: 40%;
    transform: translateX(0);
  }
}

/* High contrast mode: add borders for better visibility */
@media (prefers-contrast: high) {
  .bc-progress-bar__track {
    outline: var(--outline-width-default) solid currentColor;
    outline-offset: calc(-1 * var(--outline-width-default));
  }

  .bc-progress-bar__fill {
    outline: var(--outline-width-default) solid var(--progress-fill);
    outline-offset: calc(-1 * var(--outline-width-default));
  }
}
